async function initializeModels() {
  const apiKey = document.getElementById('apiKey').value.trim();
  const modelSelect = document.getElementById('model');
  modelSelect.innerHTML = '';

  if (!apiKey) {
    alert('Isi API Key dulu untuk cek model tersedia.');
    return;
  }

  try {
    const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`);
    const data = await res.json();
    const valid = [
      'veo-2.0-generate-001',
      'veo-3.0-generate-001',
      'veo-3.0-fast-generate-001',
      'veo-3.0-generate-preview',
      'veo-3.0-fast-generate-preview'
    ];
    data.models.forEach(m => {
      const name = m.name.split('/')[1];
      if (valid.includes(name)) {
        const opt = document.createElement('option');
        opt.value = name;
        opt.textContent = name;
        modelSelect.appendChild(opt);
      }
    });
    if (!modelSelect.options.length) {
      const opt = document.createElement('option');
      opt.value = '';
      opt.textContent = '— Tidak ada model Veo 3 tersedia —';
      modelSelect.appendChild(opt);
    }
  } catch (err) {
    console.error(err);
    alert('Gagal memuat model: ' + err.message);
  }
}